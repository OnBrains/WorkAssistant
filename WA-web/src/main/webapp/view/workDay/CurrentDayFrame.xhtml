<ui:component xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">

<ui:define name="head">
    <h:outputStylesheet name="wa-time.css" />
</ui:define>

        <h:form id="current_day_info_form">
            <p:fieldset legend="#{currentDayFrameModel.currentDay != null ? currentDayFrameModel.currentDay.day : 'Не найдено'}">
                <h:panelGrid id="start_end_time" columns="4" cellpadding="10">
                    <p:commandLink id="start_day_button" for="current_day_coming_time" action="#{currentDayFrameModel.startWork()}"
                                   disabled="#{currentDayFrameModel.currentDay.state != 'NO_WORK'}" update="current_day_info_form, :month_info_form"
                                   title="Начать рабочий день">
                        <h:graphicImage name="img/clock/clock_play.png" />
                    </p:commandLink>
                    <h:outputText id="current_day_coming_time" value="#{currentDayFrameModel.comingTime}" styleClass="window_for_time"/>

                    <p:commandLink id="end_day_button" for="current_day_out_time" action="#{currentDayFrameModel.endWork()}"
                                   disabled="#{currentDayFrameModel.currentDay.state != 'WORKING'}" update="current_day_info_form, :month_info_form"
                                   title="Закончить рабочий день">
                        <h:graphicImage name="img/clock/clock_stop.png" />
                    </p:commandLink>
                    <h:outputText id="current_day_out_time" value="#{currentDayFrameModel.outTime}" styleClass="window_for_time"/>
                </h:panelGrid>
                <h:panelGrid id="delta_time" columns="3" cellpadding="10">
                    <h:graphicImage id="img_for_end_work_day" for="time_for_end_work_day" title="Оставшееся/Переработаное время"
                                    name="#{currentDayFrameModel.ifCurrentTimeMoreOutTime() ? 'img/clock/clock_add.png' : 'img/clock/clock_delete.png'}"/>
                    <h:outputText id="time_for_end_work_day" value="#{currentDayFrameModel.resultWorkedTime}" styleClass="window_for_time"/>
                    <h:outputText id ="current_day_state" value="#{currentDayFrameModel.currentDay.state.desc}" styleClass="window_for_time"/>
                </h:panelGrid>
                <p:poll interval="60" update="time_for_end_work_day, img_for_end_work_day" stop="#{currentDayFrameModel.currentDay.state != 'WORKING'}"/>
            </p:fieldset>
        </h:form>

</ui:component>