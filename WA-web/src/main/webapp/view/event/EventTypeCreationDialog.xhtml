<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:p="http://primefaces.org/ui"
              xmlns:f="http://java.sun.com/jsf/core">

    <p:dialog id="creation_event_type_dialog" header="Создание типа события" widgetVar="creationEventTypeDialogVar"
              height="380" width="550" dynamic="true" resizable="false">

        <h:form id="creation_event_type_form" class="creationEventTypeForm">

            <p:separator/>

            <div class="ui-grid ui-grid-responsive">

                <div class="ui-grid-row">
                    <div class="ui-grid-col-12">
                        <h3>Основная информация</h3>
                    </div>
                </div>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-6" style="text-align: left; margin-top: 4px;">
                        <p:outputLabel for="event_type_category" value="Влияние на отработаное время:"/>
                    </div>
                    <div class="ui-grid-col-6">
                        <p:selectOneMenu id="event_type_category" value="#{eventTypesDirectory.newEventType.category}" style="width: 250px;"
                                         required="true" requiredMessage="Не заполнена информация о влиянии события на рабочее время">
                            <f:selectItems value="#{eventTypesDirectory.getEventCategories()}" var="cat"
                                           itemLabel="#{cat.desc}"/>
                            <p:ajax event="change" update="fixed_worked_time_panel"/>
                        </p:selectOneMenu>
                    </div>
                </div>

                <div class="ui-grid-row" style="margin-top: 10px;">
                    <div class="ui-grid-col-3" style="margin-top: 4px;">
                        <p:outputLabel for="event_type_title" value="Наименование:"/>
                    </div>
                    <div class="ui-grid-col-9">
                        <p:inputText id="event_type_title" value="#{eventTypesDirectory.newEventType.title}" style="width: 375px;"
                                     required="true" requiredMessage="Не заполнена информация о наименовании типа" maxlength="64"/>
                    </div>
                </div>

                <p:separator style="margin-top: 20px;"/>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-12">
                        <h3>Фиксированное время</h3>
                    </div>
                </div>

                <p:outputPanel id="fixed_worked_time_panel">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-3" style="text-align:center; margin-top: 4px;">
                            <p:outputLabel for="createion_possible_hours" value="Часы:"/>
                        </div>
                        <div class="ui-grid-col-3">
                            <h:selectOneMenu id="createion_possible_hours" value="#{eventTypesDirectory.selectedNoWorkHour}"
                                             disabled="#{eventTypesDirectory.newEventType.category != 'WITH_FIXED_WORKED_TIME'}"
                                             required="#{eventTypesDirectory.newEventType.category = 'WITH_FIXED_WORKED_TIME'}"
                                             requiredMessage="Не заполена информация о кол-ве часов" rendered="true">
                                <f:selectItems value="#{eventTypesDirectory.getPossibleHours()}" var="hour" itemLabel="#{hour}"/>
                            </h:selectOneMenu>
                        </div>
                        <div class="ui-grid-col-3" style="text-align:center; margin-top: 4px;">
                            <p:outputLabel for="creation_possible_minutes" value="Минуты:"/>
                        </div>
                        <div class="ui-grid-col-3">
                            <h:selectOneMenu id="creation_possible_minutes" value="#{eventTypesDirectory.selectedNoWorkMinute}"
                                             disabled="#{eventTypesDirectory.newEventType.category != 'WITH_FIXED_WORKED_TIME'}"
                                             required="#{eventTypesDirectory.newEventType.category = 'WITH_FIXED_WORKED_TIME'}"
                                             requiredMessage="Не заполена информация о кол-ве минут" rendered="true">
                                <f:selectItems value="#{eventTypesDirectory.getPossibleMinutes()}" var="minute" itemLabel="#{minute}"/>
                            </h:selectOneMenu>
                        </div>
                    </div>
                </p:outputPanel>

                <p:separator style="margin-top: 20px;"/>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-12">
                        <h3>Описание</h3>
                    </div>
                </div>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-12">
                        <p:inputTextarea value="#{eventTypesDirectory.newEventType.description}" rows="2" maxlength="512" style="width: 98%;"/>
                    </div>
                </div>

            </div>

            <div style="text-align: right; margin-top: 15px;">
                <p:commandButton value="Создать" action="#{eventTypesDirectory.createType()}" style="margin-right: 10px;"
                                 oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('creationEventTypeDialogVar').hide()}"
                                 update="#{elementsUpdate}"/>
                <p:commandButton value="Отмена" action="#{eventTypesDirectory.cancelCreationType()}"
                                 onclick="PF('creationEventTypeDialogVar').hide()"/>
            </div>

        </h:form>
    </p:dialog>

</ui:component>